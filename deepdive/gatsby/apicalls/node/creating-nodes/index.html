<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 3.14.0"/><link as="script" rel="preload" href="/DemoGatsby/webpack-runtime-b9d143e12000a2407d02.js"/><link as="script" rel="preload" href="/DemoGatsby/framework-33b76a5d919ecf8a8684.js"/><link as="script" rel="preload" href="/DemoGatsby/app-fc5dafe236c878a8b131.js"/><link as="script" rel="preload" href="/DemoGatsby/component---src-pages-deepdive-gatsby-apicalls-node-creating-nodes-js-b79bfcf2bc434d369d1d.js"/><link as="fetch" rel="preload" href="/DemoGatsby/page-data/deepdive/gatsby/apicalls/node/creating-nodes/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/DemoGatsby/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><main><title>Creating nodes</title><p>Nodes are created with gatsby-node.js <a href="https://www.gatsbyjs.com/docs/reference/config-files/gatsby-node/#sourceNodes" rel="noreferrer" target="_blank">sourceNodes ( docs )</a></p><p>When using the <a href="https://www.gatsbyjs.com/docs/reference/config-files/actions/#createNode" rel="noreferrer" target="_blank">createNode action ( docs)</a> you may want to use the node helper <a href="https://www.gatsbyjs.com/docs/reference/config-files/node-api-helpers/#createNodeId" rel="noreferrer" target="_blank">createNodeApi ( docs )</a>. The node api helper <a href="https://www.gatsbyjs.com/docs/reference/config-files/node-api-helpers/#createContentDigest" rel="noreferrer" target="_blank">createContentDigest ( docs )</a> should be used.</p><p>After the api runner has <a href="https://github.com/gatsbyjs/gatsby/blob/9a2f660d3695042eee1b7057e8a0874e395fff5a/packages/gatsby/src/utils/source-nodes.ts#L99" rel="noreferrer" target="_blank">sourced nodes</a> the store is <a href="https://github.com/gatsbyjs/gatsby/blob/9a2f660d3695042eee1b7057e8a0874e395fff5a/packages/gatsby/src/utils/source-nodes.ts#L84" rel="noreferrer" target="_blank">dispatched delete node actions</a>  for each stale node. Stale nodes are nodes from the store that have not been touched.  Nodes are touched when the touchNode action is called and internally for when createNode and the node already exists in the store ( by id ) <a href="https://github.com/gatsbyjs/gatsby/blob/64c4b701de9a6dc5e41c4b6a71bbcc8a38bbb55f/packages/gatsby/src/redux/actions/public.js#L831" rel="noreferrer" target="_blank">and has not changed</a>.  The node has changed if the <a href="https://github.com/gatsbyjs/gatsby/blob/64c4b701de9a6dc5e41c4b6a71bbcc8a38bbb55f/packages/gatsby/src/utils/nodes.ts#L9" rel="noreferrer" target="_blank">content digest has changed</a>. The <a href="https://github.com/gatsbyjs/gatsby/blob/64c4b701de9a6dc5e41c4b6a71bbcc8a38bbb55f/packages/gatsby/src/redux/actions/public.js#L472" rel="noreferrer" target="_blank">same logic applies</a> to the site page nodes that are created when the createPage action is invoked.</p><p>Note that there are nodes created internally by gatsby.  When a page is created a SitePage node is created.</p><p>The <a href="https://github.com/gatsbyjs/gatsby/blob/7adef559190aa9f785666b1c0ce7f9937230f171/packages/gatsby/src/internal-plugins/internal-data-bridge/gatsby-node.js#L44" rel="noreferrer" target="_blank">internal-data-bridge</a>creates nodes with information about the following :</p><ul><li>plugins - type SitePlugin</li><li>config - type Site.  This is the config without the plugins.</li><li>build time - type SiteBuildMetadata.  This is up to the moment that sourceNodes is invoked.</li><li>functions - type SiteFunction</li></ul></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/deepdive/gatsby/apicalls/node/creating-nodes/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-fd5502421d629d1c910a.js"],"app":["/app-fc5dafe236c878a8b131.js"],"component---src-pages-404-js":["/component---src-pages-404-js-9f9fd1d9b60435413e61.js"],"component---src-pages-[match]-js":["/component---src-pages-[match]-js-c8f757d5c8fc2fb3d23c.js"],"component---src-pages-deepdive-cli-js":["/component---src-pages-deepdive-cli-js-5741b91b6777519321aa.js"],"component---src-pages-deepdive-gatsby-apicalls-node-build-js":["/component---src-pages-deepdive-gatsby-apicalls-node-build-js-e5e4b56ca87f5d0bb4a6.js"],"component---src-pages-deepdive-gatsby-apicalls-node-creating-nodes-js":["/component---src-pages-deepdive-gatsby-apicalls-node-creating-nodes-js-b79bfcf2bc434d369d1d.js"],"component---src-pages-deepdive-gatsby-apicalls-node-creating-pages-js":["/component---src-pages-deepdive-gatsby-apicalls-node-creating-pages-js-2dfb533b04b8d55e2216.js"],"component---src-pages-deepdive-gatsby-apicalls-node-index-js":["/component---src-pages-deepdive-gatsby-apicalls-node-index-js-25bcd576de4091c3fafe.js"],"component---src-pages-deepdive-gatsby-apicalls-node-nodes-js":["/component---src-pages-deepdive-gatsby-apicalls-node-nodes-js-78ea86f5dc156d3e163d.js"],"component---src-pages-deepdive-gatsby-apicalls-node-pages-js":["/component---src-pages-deepdive-gatsby-apicalls-node-pages-js-429f58648a20d576e77a.js"],"component---src-pages-deepdive-gatsby-debugging-js":["/component---src-pages-deepdive-gatsby-debugging-js-d5ef0d64a47152f2106d.js"],"component---src-pages-deepdive-gatsby-index-js":["/component---src-pages-deepdive-gatsby-index-js-e7b7db76472828d679e8.js"],"component---src-pages-deepdive-gatsby-plugins-js":["/component---src-pages-deepdive-gatsby-plugins-js-de83669c3a27e3acecd1.js"],"component---src-pages-deepdive-gatsby-prefixes-js":["/component---src-pages-deepdive-gatsby-prefixes-js-21b67aa42668832d6c37.js"],"component---src-pages-deepdive-gatsby-reporter-js":["/component---src-pages-deepdive-gatsby-reporter-js-75b6f100488f1bc790b2.js"],"component---src-pages-deepdive-gatsby-store-cache-js":["/component---src-pages-deepdive-gatsby-store-cache-js-dbe7ef065c5348ef6a7b.js"],"component---src-pages-deepdive-mdxplugin-js":["/component---src-pages-deepdive-mdxplugin-js-ff1e0bd02065d047b9bb.js"],"component---src-pages-index-js":["/component---src-pages-index-js-c65a6b8256ce98a6a1f4.js"],"component---src-pages-mdx-mdx":["/component---src-pages-mdx-mdx-a0916c906b3d8eac84ca.js"],"component---src-templates-dynamic-page-template-js":["/component---src-templates-dynamic-page-template-js-5b35e311d2f48f0b9bdd.js"]};/*]]>*/</script><script src="/DemoGatsby/polyfill-fd5502421d629d1c910a.js" nomodule=""></script><script src="/DemoGatsby/component---src-pages-deepdive-gatsby-apicalls-node-creating-nodes-js-b79bfcf2bc434d369d1d.js" async=""></script><script src="/DemoGatsby/app-fc5dafe236c878a8b131.js" async=""></script><script src="/DemoGatsby/framework-33b76a5d919ecf8a8684.js" async=""></script><script src="/DemoGatsby/webpack-runtime-b9d143e12000a2407d02.js" async=""></script></body></html>