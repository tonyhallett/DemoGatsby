<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 3.14.0"/><link as="script" rel="preload" href="/DemoGatsby/webpack-runtime-b9d143e12000a2407d02.js"/><link as="script" rel="preload" href="/DemoGatsby/framework-33b76a5d919ecf8a8684.js"/><link as="script" rel="preload" href="/DemoGatsby/app-fc5dafe236c878a8b131.js"/><link as="script" rel="preload" href="/DemoGatsby/3710c607fb7064fe4fae57fa2457800b9099a42b-828b874f09212eef7e62.js"/><link as="script" rel="preload" href="/DemoGatsby/component---src-pages-deepdive-gatsby-debugging-js-d5ef0d64a47152f2106d.js"/><link as="fetch" rel="preload" href="/DemoGatsby/page-data/deepdive/gatsby/debugging/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/DemoGatsby/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><main><title>Debugging</title><p>Gatsby has documentation on <a href="https://www.gatsbyjs.com/docs/debugging-the-build-process" rel="noreferrer" target="_blank">debugging the build process</a>.</p><p><code>gatsby develop --help</code> mentions the passing inspect or inspect-brk as <a href="https://github.com/gatsbyjs/gatsby/blob/492068b0d1a08e544c3c51fb2fc1360087437b99/packages/gatsby-cli/src/create-cli.ts#L193" rel="noreferrer" target="_blank">args</a>.</p><p>Inspect <a href="https://github.com/gatsbyjs/gatsby/blob/492068b0d1a08e544c3c51fb2fc1360087437b99/packages/gatsby-cli/src/create-cli.ts#L212" rel="noreferrer" target="_blank"></a>defaults to 9229.  Develop <a href="https://github.com/gatsbyjs/gatsby/blob/492068b0d1a08e544c3c51fb2fc1360087437b99/packages/gatsby/src/commands/develop.ts#L75" rel="noreferrer" target="_blank">gets debug info</a> and it is used <a href="https://github.com/gatsbyjs/gatsby/blob/492068b0d1a08e544c3c51fb2fc1360087437b99/packages/gatsby/src/commands/develop.ts#L108" rel="noreferrer" target="_blank">here</a></p><p>With vscode Settings/Debug/Javascript : Auto Attach Filter set to always then running gatsby develop or gatsby build from npm scripts will enable debugging.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code class="language-javascript" style="white-space:pre"><span>
</span>{
<span>  </span><span style="color:#219161">&quot;scripts&quot;</span><span>: {
</span><span>    </span><span style="color:#219161">&quot;develop&quot;</span><span>: </span><span style="color:#219161">&quot;gatsby develop&quot;</span><span>,
</span><span>    </span><span style="color:#219161">&quot;build&quot;</span><span>: </span><span style="color:#219161">&quot;gatsby build&quot;</span><span>,
</span>  }
<!-- -->}
<!-- -->
</code></pre><p>Alternatively there is <a href="https://www.gatsbyjs.com/docs/debugging-the-build-process/#vs-code-debugger-manual-config" rel="noreferrer" target="_blank">vscode launch configuration</a>.</p><h2>.vscode/settings.json ( for windows )</h2><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code class="language-javascript" style="white-space:pre"><span>
</span>{
<span>    </span><span style="color:#219161">&quot;launch&quot;</span><span>: {
</span><span>        </span><span style="color:#219161">&quot;version&quot;</span><span>: </span><span style="color:#219161">&quot;0.2.0&quot;</span><span>,
</span><span>        </span><span style="color:#219161">&quot;configurations&quot;</span><span>: [
</span>          {
<span>            </span><span style="color:#219161">&quot;name&quot;</span><span>: </span><span style="color:#219161">&quot;Gatsby develop&quot;</span><span>,
</span><span>            </span><span style="color:#219161">&quot;type&quot;</span><span>: </span><span style="color:#219161">&quot;pwa-node&quot;</span><span>,
</span><span>            </span><span style="color:#219161">&quot;request&quot;</span><span>: </span><span style="color:#219161">&quot;launch&quot;</span><span>,
</span><span>            </span><span style="color:#219161">&quot;program&quot;</span><span>: </span><span style="color:#219161">&quot;${workspaceRoot}/node_modules/gatsby/dist/bin/gatsby&quot;</span><span>,
</span><span>            </span><span style="color:#219161">&quot;args&quot;</span><span>: [</span><span style="color:#219161">&quot;develop&quot;</span><span>],
</span><span>            </span><span style="color:#219161">&quot;runtimeArgs&quot;</span><span>: [</span><span style="color:#219161">&quot;--nolazy&quot;</span><span>],
</span><span>            </span><span style="color:#219161">&quot;console&quot;</span><span>: </span><span style="color:#219161">&quot;integratedTerminal&quot;</span><span>
</span>          },
<!-- -->          {
<span>            </span><span style="color:#219161">&quot;name&quot;</span><span>: </span><span style="color:#219161">&quot;Gatsby build&quot;</span><span>,
</span><span>            </span><span style="color:#219161">&quot;type&quot;</span><span>: </span><span style="color:#219161">&quot;pwa-node&quot;</span><span>,
</span><span>            </span><span style="color:#219161">&quot;request&quot;</span><span>: </span><span style="color:#219161">&quot;launch&quot;</span><span>,
</span><span>            </span><span style="color:#219161">&quot;program&quot;</span><span>: </span><span style="color:#219161">&quot;${workspaceRoot}/node_modules/gatsby/dist/bin/gatsby&quot;</span><span>,
</span><span>            </span><span style="color:#219161">&quot;args&quot;</span><span>: [</span><span style="color:#219161">&quot;build&quot;</span><span>],
</span><span>            </span><span style="color:#219161">&quot;runtimeArgs&quot;</span><span>: [</span><span style="color:#219161">&quot;--nolazy&quot;</span><span>],
</span><span>            </span><span style="color:#219161">&quot;console&quot;</span><span>: </span><span style="color:#219161">&quot;integratedTerminal&quot;</span><span>
</span>          },
<!-- -->          {
<span>            </span><span style="color:#219161">&quot;name&quot;</span><span>: </span><span style="color:#219161">&quot;Gatsby build global&quot;</span><span>,
</span><span>            </span><span style="color:#219161">&quot;type&quot;</span><span>: </span><span style="color:#219161">&quot;pwa-node&quot;</span><span>,
</span><span>            </span><span style="color:#219161">&quot;request&quot;</span><span>: </span><span style="color:#219161">&quot;launch&quot;</span><span>,
</span><span>            </span><span style="color:#219161">&quot;program&quot;</span><span>: </span><span style="color:#219161">&quot;${env:NVM_SYMLINK}/node_modules/gatsby-cli/cli.js&quot;</span><span>,
</span><span>            </span><span style="color:#219161">&quot;args&quot;</span><span>: [</span><span style="color:#219161">&quot;build&quot;</span><span>,</span><span style="color:#219161">&quot;--verbose&quot;</span><span>],
</span><span>            </span><span style="color:#219161">&quot;runtimeArgs&quot;</span><span>: [</span><span style="color:#219161">&quot;--nolazy&quot;</span><span>],
</span><span>            </span><span style="color:#219161">&quot;console&quot;</span><span>: </span><span style="color:#219161">&quot;integratedTerminal&quot;</span><span>
</span>          }
<!-- -->        ]
<!-- -->      }
<!-- -->}
<!-- -->
</code></pre><p>Note there are two ways of specifying the entry point.  To debug the code path taken when you type gatsby build/develop the global cli should be specified ( as this is the bin in package.json ) which <code>require(`./lib/index.js`)</code>. &quot;node_modules/gatsby/dist/bin/gatsby&quot; is <code>require(`gatsby-cli`);</code> which in turn is <code>require(`./lib/index.js`)</code>, the same code as the global cli. Both the global and local cli call into node_modules/gatsby/dist/commands - build.js or develop.js due to <a href="https://github.com/gatsbyjs/gatsby/blob/17a3f9f69ae2710f4aeef27603226281f2713281/packages/gatsby-cli/src/create-cli.ts#L82" rel="noreferrer" target="_blank">resolve-cwd</a>.</p><p>When there is a global cli the local cli redux store is given log state from global and the global cli is configured to use the local store.  This occurs <a href="https://github.com/gatsbyjs/gatsby/blob/17a3f9f69ae2710f4aeef27603226281f2713281/packages/gatsby/src/services/initialize.ts#L100" rel="noreferrer" target="_blank">here</a></p><p>For verbose logging add &quot;--verbose&quot; to the args array.</p><p>The entry point is <a href="https://github.com/gatsbyjs/gatsby/blob/17a3f9f69ae2710f4aeef27603226281f2713281/packages/gatsby-cli/src/index.ts#L12" rel="noreferrer" target="_blank">the gatsby cli</a>.  Although you will probably just want to add a breakpoint in build or develop within <code>node_modules/gatsby/dist/commands/<b>develop|build</b>.js</code></p><p>To understand gatsby debugging the <a href="https://github.com/gatsbyjs/gatsby/blob/17a3f9f69ae2710f4aeef27603226281f2713281/packages/gatsby/src/commands/build.ts#L55" rel="noreferrer" target="_blank">build</a> is simpler.</p></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/deepdive/gatsby/debugging/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-fd5502421d629d1c910a.js"],"app":["/app-fc5dafe236c878a8b131.js"],"component---src-pages-404-js":["/component---src-pages-404-js-9f9fd1d9b60435413e61.js"],"component---src-pages-[match]-js":["/component---src-pages-[match]-js-c8f757d5c8fc2fb3d23c.js"],"component---src-pages-deepdive-cli-js":["/component---src-pages-deepdive-cli-js-5741b91b6777519321aa.js"],"component---src-pages-deepdive-gatsby-apicalls-node-build-js":["/component---src-pages-deepdive-gatsby-apicalls-node-build-js-e5e4b56ca87f5d0bb4a6.js"],"component---src-pages-deepdive-gatsby-apicalls-node-creating-nodes-js":["/component---src-pages-deepdive-gatsby-apicalls-node-creating-nodes-js-b79bfcf2bc434d369d1d.js"],"component---src-pages-deepdive-gatsby-apicalls-node-creating-pages-js":["/component---src-pages-deepdive-gatsby-apicalls-node-creating-pages-js-2dfb533b04b8d55e2216.js"],"component---src-pages-deepdive-gatsby-apicalls-node-index-js":["/component---src-pages-deepdive-gatsby-apicalls-node-index-js-25bcd576de4091c3fafe.js"],"component---src-pages-deepdive-gatsby-apicalls-node-nodes-js":["/component---src-pages-deepdive-gatsby-apicalls-node-nodes-js-78ea86f5dc156d3e163d.js"],"component---src-pages-deepdive-gatsby-apicalls-node-pages-js":["/component---src-pages-deepdive-gatsby-apicalls-node-pages-js-429f58648a20d576e77a.js"],"component---src-pages-deepdive-gatsby-debugging-js":["/component---src-pages-deepdive-gatsby-debugging-js-d5ef0d64a47152f2106d.js"],"component---src-pages-deepdive-gatsby-index-js":["/component---src-pages-deepdive-gatsby-index-js-e7b7db76472828d679e8.js"],"component---src-pages-deepdive-gatsby-plugins-js":["/component---src-pages-deepdive-gatsby-plugins-js-de83669c3a27e3acecd1.js"],"component---src-pages-deepdive-gatsby-prefixes-js":["/component---src-pages-deepdive-gatsby-prefixes-js-21b67aa42668832d6c37.js"],"component---src-pages-deepdive-gatsby-reporter-js":["/component---src-pages-deepdive-gatsby-reporter-js-75b6f100488f1bc790b2.js"],"component---src-pages-deepdive-gatsby-store-cache-js":["/component---src-pages-deepdive-gatsby-store-cache-js-dbe7ef065c5348ef6a7b.js"],"component---src-pages-deepdive-mdxplugin-js":["/component---src-pages-deepdive-mdxplugin-js-ff1e0bd02065d047b9bb.js"],"component---src-pages-index-js":["/component---src-pages-index-js-c65a6b8256ce98a6a1f4.js"],"component---src-pages-mdx-mdx":["/component---src-pages-mdx-mdx-a0916c906b3d8eac84ca.js"],"component---src-templates-dynamic-page-template-js":["/component---src-templates-dynamic-page-template-js-5b35e311d2f48f0b9bdd.js"]};/*]]>*/</script><script src="/DemoGatsby/polyfill-fd5502421d629d1c910a.js" nomodule=""></script><script src="/DemoGatsby/component---src-pages-deepdive-gatsby-debugging-js-d5ef0d64a47152f2106d.js" async=""></script><script src="/DemoGatsby/3710c607fb7064fe4fae57fa2457800b9099a42b-828b874f09212eef7e62.js" async=""></script><script src="/DemoGatsby/app-fc5dafe236c878a8b131.js" async=""></script><script src="/DemoGatsby/framework-33b76a5d919ecf8a8684.js" async=""></script><script src="/DemoGatsby/webpack-runtime-b9d143e12000a2407d02.js" async=""></script></body></html>