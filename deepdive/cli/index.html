<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 3.14.0"/><link as="script" rel="preload" href="/DemoGatsby/webpack-runtime-e219c5407a1d00fa94b6.js"/><link as="script" rel="preload" href="/DemoGatsby/framework-33b76a5d919ecf8a8684.js"/><link as="script" rel="preload" href="/DemoGatsby/app-1278c9edcea15d13f431.js"/><link as="script" rel="preload" href="/DemoGatsby/3710c607fb7064fe4fae57fa2457800b9099a42b-828b874f09212eef7e62.js"/><link as="script" rel="preload" href="/DemoGatsby/component---src-pages-deepdive-cli-js-5741b91b6777519321aa.js"/><link as="fetch" rel="preload" href="/DemoGatsby/page-data/deepdive/cli/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/DemoGatsby/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><main><title>Cli</title><p>The code for the cli can be found <a href="https://github.com/gatsbyjs/gatsby/blob/bb1c470a636a09b669f30d5b3674831cd2b55362/packages/gatsby-cli/src/create-cli.ts" rel="noreferrer" target="_blank">here</a></p><p><a href="https://github.com/gatsbyjs/gatsby/blob/bb1c470a636a09b669f30d5b3674831cd2b55362/packages/gatsby-cli/src/create-cli.ts#L549" rel="noreferrer" target="_blank">Here</a> we can see the code for the gatsby new command.</p><pre style="display:block;overflow-x:auto;padding:0.5em;color:#000;background:#f8f8ff"><code class="language-javascript" style="white-space:pre"><span>
</span><span></span><span style="color:#954121">import</span><span> { run </span><span style="color:#954121">as</span><span> runCreateGatsby } </span><span style="color:#954121">from</span><span> </span><span style="color:#219161">&quot;create-gatsby&quot;</span><span>
</span>
<span></span><span style="color:#408080;font-style:italic">//......</span><span>
</span><span></span><span style="color:#954121">return</span><span> cli
</span>    .command({
<span>      </span><span class="hljs-attr">command</span><span>: </span><span style="color:#219161">`new [rootPath] [starter]`</span><span>,
</span><span>      </span><span class="hljs-attr">describe</span><span>: </span><span style="color:#219161">`Create new Gatsby project.`</span><span>,
</span><span>      </span><span class="hljs-attr">handler</span><span>: handlerP(</span><span style="color:#954121">async</span><span> ({ rootPath, starter }) =&gt; {
</span><span>        </span><span style="color:#954121">const</span><span> starterStr = starter ? </span><span style="color:#0086b3">String</span><span>(starter) : </span><span style="color:#954121">undefined</span><span>
</span><span>        </span><span style="color:#954121">const</span><span> rootPathStr = rootPath ? </span><span style="color:#0086b3">String</span><span>(rootPath) : </span><span style="color:#954121">undefined</span><span>
</span>
<span>        </span><span style="color:#408080;font-style:italic">// We only run the interactive CLI when there are no arguments passed in</span><span>
</span><span>        </span><span style="color:#954121">if</span><span> (!starterStr &amp;&amp; !rootPathStr) {
</span><span>          </span><span style="color:#954121">await</span><span> runCreateGatsby()
</span><span>        } </span><span style="color:#954121">else</span><span> {
</span><span>          </span><span style="color:#954121">await</span><span> initStarter(starterStr, rootPathStr)
</span>        }
<!-- -->      }),
<!-- -->    })
<!-- -->
</code></pre><a href="https://github.com/gatsbyjs/gatsby/blob/bb1c470a636a09b669f30d5b3674831cd2b55362/packages/gatsby-cli/src/create-cli.ts#L549" rel="noreferrer" target="_blank">create-gatsby run</a><br/><p>Here you can see the prompting and the answers map to files providing the necessary plugins for package install and configuration in gatsby-config.js</p><a href="https://github.com/gatsbyjs/gatsby/blob/bb1c470a636a09b669f30d5b3674831cd2b55362/packages/create-gatsby/src/cmses.json" rel="noreferrer" target="_blank">cms</a><br/><a href="https://github.com/gatsbyjs/gatsby/blob/bb1c470a636a09b669f30d5b3674831cd2b55362/packages/create-gatsby/src/features.json" rel="noreferrer" target="_blank">features</a><br/><a href="https://github.com/gatsbyjs/gatsby/blob/bb1c470a636a09b669f30d5b3674831cd2b55362/packages/create-gatsby/src/styles.json" rel="noreferrer" target="_blank">styles</a><br/><p>The starter is initialized first. The path taken depends upon the starter argument <code>gatsby new [rootPath] [starter]</code>. <!-- -->The format for <code>[starter]</code> is described in <a href="https://www.gatsbyjs.com/docs/starters/" rel="noreferrer" target="_blank">gatsby docs starters</a>.</p><p>For a github repo - <a href="https://github.com/gatsbyjs/gatsby/blob/bb1c470a636a09b669f30d5b3674831cd2b55362/packages/gatsby-cli/src/init-starter.ts#L341" rel="noreferrer" target="_blank">clone</a><br/> </p><p>Then the plugins are installed. Performed by the cli <a href="https://github.com/gatsbyjs/gatsby/blob/bb1c470a636a09b669f30d5b3674831cd2b55362/packages/gatsby-cli/src/handlers/plugin-add.ts#L62" rel="noreferrer" target="_blank">addPlugins</a><br/></p><p>Site metadata title is then set</p><p>Some final git work is <a href="https://github.com/gatsbyjs/gatsby/blob/bb1c470a636a09b669f30d5b3674831cd2b55362/packages/create-gatsby/src/init-starter.ts#L190" rel="noreferrer" target="_blank">performed.</a></p></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/deepdive/cli/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-fd5502421d629d1c910a.js"],"app":["/app-1278c9edcea15d13f431.js"],"component---src-pages-404-js":["/component---src-pages-404-js-9f9fd1d9b60435413e61.js"],"component---src-pages-deepdive-cli-js":["/component---src-pages-deepdive-cli-js-5741b91b6777519321aa.js"],"component---src-pages-deepdive-gatsby-apicalls-node-build-js":["/component---src-pages-deepdive-gatsby-apicalls-node-build-js-e5e4b56ca87f5d0bb4a6.js"],"component---src-pages-deepdive-gatsby-apicalls-node-creating-nodes-js":["/component---src-pages-deepdive-gatsby-apicalls-node-creating-nodes-js-b79bfcf2bc434d369d1d.js"],"component---src-pages-deepdive-gatsby-apicalls-node-creating-pages-js":["/component---src-pages-deepdive-gatsby-apicalls-node-creating-pages-js-2dfb533b04b8d55e2216.js"],"component---src-pages-deepdive-gatsby-apicalls-node-index-js":["/component---src-pages-deepdive-gatsby-apicalls-node-index-js-25bcd576de4091c3fafe.js"],"component---src-pages-deepdive-gatsby-apicalls-node-nodes-js":["/component---src-pages-deepdive-gatsby-apicalls-node-nodes-js-78ea86f5dc156d3e163d.js"],"component---src-pages-deepdive-gatsby-apicalls-node-pages-js":["/component---src-pages-deepdive-gatsby-apicalls-node-pages-js-429f58648a20d576e77a.js"],"component---src-pages-deepdive-gatsby-debugging-js":["/component---src-pages-deepdive-gatsby-debugging-js-d5ef0d64a47152f2106d.js"],"component---src-pages-deepdive-gatsby-index-js":["/component---src-pages-deepdive-gatsby-index-js-e7b7db76472828d679e8.js"],"component---src-pages-deepdive-gatsby-plugins-js":["/component---src-pages-deepdive-gatsby-plugins-js-de83669c3a27e3acecd1.js"],"component---src-pages-deepdive-gatsby-prefixes-js":["/component---src-pages-deepdive-gatsby-prefixes-js-21b67aa42668832d6c37.js"],"component---src-pages-deepdive-gatsby-reporter-js":["/component---src-pages-deepdive-gatsby-reporter-js-75b6f100488f1bc790b2.js"],"component---src-pages-deepdive-gatsby-store-cache-js":["/component---src-pages-deepdive-gatsby-store-cache-js-dbe7ef065c5348ef6a7b.js"],"component---src-pages-deepdive-mdxplugin-js":["/component---src-pages-deepdive-mdxplugin-js-ff1e0bd02065d047b9bb.js"],"component---src-pages-index-js":["/component---src-pages-index-js-c65a6b8256ce98a6a1f4.js"],"component---src-pages-match-match-js":["/component---src-pages-match-match-js-07f43f04f1a56799a074.js"],"component---src-pages-mdx-mdx":["/component---src-pages-mdx-mdx-a0916c906b3d8eac84ca.js"],"component---src-templates-dynamic-page-template-js":["/component---src-templates-dynamic-page-template-js-5b35e311d2f48f0b9bdd.js"]};/*]]>*/</script><script src="/DemoGatsby/polyfill-fd5502421d629d1c910a.js" nomodule=""></script><script src="/DemoGatsby/component---src-pages-deepdive-cli-js-5741b91b6777519321aa.js" async=""></script><script src="/DemoGatsby/3710c607fb7064fe4fae57fa2457800b9099a42b-828b874f09212eef7e62.js" async=""></script><script src="/DemoGatsby/app-1278c9edcea15d13f431.js" async=""></script><script src="/DemoGatsby/framework-33b76a5d919ecf8a8684.js" async=""></script><script src="/DemoGatsby/webpack-runtime-e219c5407a1d00fa94b6.js" async=""></script></body></html>